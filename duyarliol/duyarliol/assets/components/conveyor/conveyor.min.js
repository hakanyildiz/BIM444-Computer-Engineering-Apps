!function(a){a.fn.conveyor=function(d){var e=a(this);return c.any(),conveyor=new b(e,d),window.addEventListener("resize",conveyor.resize,!1),e};var b=function(b,c){this.config={ul:"#cb-images",fit:"cover",auto:!0,countdown:~~(2e3*Math.random())+500,speed:400,startPosition:1,transition:"blend",ease:"normal",direction:"forward",overflow:!0,html:!1,htmlbg:null,controls:!1,buttonDimension:20},a.extend(this.config,c),this.el=b,this.width=this.el.width(),this.height=this.el.height(),this.total=this.el.find("li").length,this.current=this.order(this.config.startPosition),this.ulwidth=this.total*this.width,this.ulheight=this.total*this.height,this.ease=this.easeSwitch(),this.tweening=!0,this.ul=a(this.el).find(this.config.ul),this.init()};b.prototype.init=function(){this.slides=[],$this=this,this.setup(),this.el.find("li").each(function(b){$this.slides[b]={item:a(this),path:a(this).children().attr("src"),orient:$this.orientation(a(this).children("img")),i:b},$this.config.html||a(this).html(""),$this.cssemble($this.slides[b])}),"blend"!=$this.config.transition&&a(this.ul).css(this.prefixer()),this.config.auto&&this.autoslide(),this.config.controls&&this.addControls()},b.prototype.setup=function(){var b=this.config.transition;switch(this.config.overflow&&this.el.css("overflow","hidden"),a(this.ul).css({position:"relative","list-style":"none"}),b){case"horizontal":this.xpos=-(this.current*this.width),a(this.ul).css({width:this.ulwidth+"px",left:this.xpos+"px"});break;case"vertical":this.ypos=-(this.current*this.height),a(this.ul).css({top:this.ypos+"px"});break;case"blend":a(this).css(this.prefixer())}},b.prototype.cssemble=function(a){var b=a.item,c=a.path,d=this,e=this.sizer();if(b.css(this.stacking()),this.config.html&&(c=this.config.htmlbg),b.css({width:d.width+"px",height:d.height+"px","background-image":"url("+c+")","background-color":"transparent","background-repeat":"no-repeat","background-position":"center center","background-size":e}),"blend"==this.config.transition){b.css(this.prefixer());var f=this.current==a.i?1:0;b.css("opacity",f)}},b.prototype.order=function(a){return"random"==a?Math.floor(Math.random()*this.total):"last"==a?this.total-1:a-1},b.prototype.stacking=function(){var a;switch(this.config.transition){case"horizontal":return a={"float":"left"};case"vertical":return a={"float":"left"};case"blend":return a={position:"absolute"}}},b.prototype.slide=function(a){var b=this,c=this.config.transition,d=this.slides[this.current].item;"forward"==a?this.current==this.total-1?(this.current=0,this.transition(c,"forward","reset")):(this.current++,this.transition(c,"forward","normal")):this.current>=1?(this.current--,this.transition(c,"backward","normal")):(this.current=this.total-1,this.transition(c,"backward","reset"));var e=this.slides[this.current].item;switch(c){case"horizontal":this.el.children(this.ul).css({left:b.xpos+"px"});break;case"vertical":this.el.children(this.ul).css({top:b.ypos+"px"});break;case"blend":d.css("opacity",0),e.css("opacity",1)}},b.prototype.transition=function(a,b,c){switch(a){case"horizontal":this.transit.slide(b,c,this);break;case"vertical":this.transit.vertical(b,c,this);break;case"blend":this.transit.alpha(b,c,this)}},b.prototype.transit={slide:function(a,b,c){"forward"==a?"reset"==b?c.xpos=0:c.xpos-=c.width:"reset"==b?c.xpos=-c.ulwidth+c.width:c.xpos+=c.width},vertical:function(a,b,c){"forward"==a?"reset"==b?c.ypos=0:c.ypos-=c.height:"reset"==b?c.ypos=-c.ulwidth+c.height:c.ypos+=c.height},alpha:function(a,b,c){"forward"==a?"reset"==b?c.ypos=0:c.ypos-=c.height:"reset"==b?c.ypos=-c.ulwidth+c.height:c.ypos+=c.height}},b.prototype.toggleTween=function(){this.tweening=this.tweening?!1:!0,"slide"==this.config.transition&&a(this.ul).css(this.prefixer())},b.prototype.autoslide=function(){var a=this;this.auto=setInterval(function(){if(this.random=!0,this.random){var b=Math.random()>.5?"forward":"reverse";a.slide(b)}else a.slide(a.config.direction)},this.config.countdown)},b.prototype.addControls=function(){var b=this,c=this.config.buttonDimension,d=this.height/2+c+c/2;this.el.parent().append('<div class="cb-next"/>'),this.el.parent().append('<div class="cb-prev"/>'),console.log(this.height),a(".cb-next").css({"float":"right",position:"relative",top:"-"+d+"px",right:"-"+c/2+"px","margin-top":c/2+"px","margin-left":c/2+"px",width:c+"px",height:c+"px","border-left":"15px solid rgb(255,255,255)","border-top":"15px solid rgb(255,255,255)","-webkit-transform":"rotate(135deg)","-webkit-transition":"all .3s",opacity:".5"}),a(".cb-next").on("click",function(){b.slide(b.config.direction)}).on("mouseover",function(){a(this).css({opacity:"1",cursor:"pointer"})}).on("mouseout",function(){a(this).css("opacity",".5")}),a(".cb-prev").css({"float":"left",position:"relative",top:"-"+d+"px",left:"-"+c+"px","margin-top":c/2+"px","margin-left":c/2+"px",width:c+"px",height:c+"px","border-left":"15px solid rgb(255,255,255)","border-top":"15px solid rgb(255,255,255)","-webkit-transform":"rotate(-45deg)","-webkit-transition":"all .3s",opacity:".5"}),a(".cb-prev").on("click",function(){var a="forward"==b.config.direction?"backward":"forward";b.slide(a)}).on("mouseover",function(){a(this).css({opacity:"1",cursor:"pointer"})}).on("mouseout",function(){a(this).css("opacity",".5")})},b.prototype.orientation=function(a){var b=a.width(),c=a.height(),d=b>c?!0:!1;return d},b.prototype.prefixer=function(){var a={};return a=this.tweening?{"-webkit-transition":"all "+this.config.speed+"ms "+this.ease,"-moz-transition":"all "+this.config.speed+"ms "+this.ease,"-ms-transition":"all "+this.config.speed+"ms "+this.ease,"-o-transition":"all "+this.config.speed+"ms "+this.ease,transition:"all "+this.config.speed+"ms "+this.ease}:{"-webkit-transition":"all 0","-moz-transition":"all 0","-ms-transition":"all 0","-o-transition":"all 0",transition:"all 0"}},b.prototype.sizer=function(){var a,b=this.config.fit;switch("string"!=typeof b&&(a=100*b+"%",b="percent"),b){case"portrait":return b="auto 100%";case"landscape":return b="100% auto";case"cover":return b="cover";case"percent":return a}},b.prototype.easeSwitch=function(){var a=this.config.ease,b=a.charAt(0);switch(b){case"n":return"";case"i":return"ease-in";case"o":return"cubic-bezier(0.230, 1.000, 0.320, 1.000)";case"$":return a.substring(1).toString()}},b.prototype.resize=function(){};var c={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return c.Android()||c.BlackBerry()||c.iOS()||c.Opera()||c.Windows()}}}(jQuery);