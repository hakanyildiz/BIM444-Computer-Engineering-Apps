<link rel="import" href="../polymer/polymer.html" />
<link rel="import" href="../kaldirirmi-styles/kaldirirmi-manuel-addsystempage-shared-styles.html"/>
<dom-module id="kaldirirmi-manuel-add-systempage">
    <style is="custom-style" include="kaldirirmi-manuel-addsystempage-shared-styles">
    </style> 
    <template>
        <div id="system"> <iron-ajax id="getusersysteminfo" url="/h/main?fm=user-system" method="get" handle-as="json"></iron-ajax> <iron-ajax auto url="/h/main?fm=get-cpus" method="get" handle-as="json" last-response="{{allcpus}}"></iron-ajax> <iron-ajax auto url="/h/main?fm=get-gpus" method="get" handle-as="json" last-response="{{allgpus}}"></iron-ajax> <iron-ajax auto url="/h/main?fm=get-oss" method="get" handle-as="json" last-response="{{alloss}}"></iron-ajax> <div id="systemheader"> <paper-icon-button icon="arrow-back" onclick="load(); location.href='/uye/profil';"></paper-icon-button> <h1 id="systemtitle">Sistemini Tanımla</h1> </div><div id="systemcontent"> <paper-material id="newsystemholder" elevation="0"> <form id="newsystemform" is="iron-form" action="/h/main" method="post"> <input type="hidden" name="fm" value="new-user-system" /> <input type="hidden" id="cpu" name="cpu" value="" /> <input type="hidden" id="gpu" name="gpu" value="" /> <input type="hidden" id="os" name="os" value="" /> <paper-autocomplete source="[[allcpus]]" id="newsystemcpu" name="cpuname" label="İşlemci" required min-length="2" show-clear="true" placeholder="lütfen 2 karakter gir" auto-validate="true" error-message="Bu alanın doldurulması zorunludur" text-property="text" value-property="value"></paper-autocomplete> <paper-autocomplete source="[[allgpus]]" id="newsystemgpu" name="gpuname" label="Ekran Kartı" required min-length="2" show-clear="true" placeholder="lütfen 2 karakter gir" auto-validate="true" error-message="Bu alanın doldurulması zorunludur" text-property="text" value-property="value"></paper-autocomplete> <paper-autocomplete source="[[alloss]]" id="newsystemos" name="osname" label="İşletim Sistemi" required min-length="2" show-clear="true" placeholder="lütfen 2 karakter gir" auto-validate="true" error-message="Bu alanın doldurulması zorunludur" text-property="text" value-property="value"></paper-autocomplete> <paper-input id="newsystemram" name="ram" label="Ram" required error-message="Bu alanın doldurulması zorunludur"></paper-input> <paper-input id="newsystemhdd" name="hdd" label="Boş Alan" required error-message="Bu alanın doldurulması zorunludur"></paper-input> <div class="buttons"> <paper-button raised id="newsystemsubmit">Onayla</paper-button> </div></form> </paper-material> </div><paper-toast id="newsystemalert" duration="10000" class="fit-bottom"></paper-toast> </div>
    </template>
    <script>
        Polymer({ is: "kaldirirmi-manuel-add-systempage", properties: {} }), document.addEventListener("WebComponentsReady", function () { load(), document.getElementById("getusersysteminfo").generateRequest(), document.getElementById("getusersysteminfo").addEventListener("response", function (e) { e.detail.response.added && (document.getElementById("systemtitle").innerText = "Sistemini Güncelle", document.getElementById("cpu").setAttribute("value", e.detail.response.cpu.value), document.getElementById("gpu").setAttribute("value", e.detail.response.gpu.value), document.getElementById("os").setAttribute("value", e.detail.response.os.value), document.getElementById("newsystemcpu").value = e.detail.response.cpu.value, document.getElementById("newsystemcpu").$.input.value = e.detail.response.cpu.text, document.getElementById("newsystemgpu").value = e.detail.response.gpu.value, document.getElementById("newsystemgpu").$.input.value = e.detail.response.gpu.text, document.getElementById("newsystemos").value = e.detail.response.os.value, document.getElementById("newsystemos").$.input.value = e.detail.response.os.text, document.getElementById("newsystemram").value = e.detail.response.ram, document.getElementById("newsystemhdd").value = e.detail.response.free_hdd, document.getElementById("newsystemsubmit").innerText = "güncelle"), unload() }), document.getElementById("newsystemcpu").addEventListener("autocomplete.selected", function (e) { document.getElementById("cpu").setAttribute("value", e.detail.option.value) }), document.getElementById("newsystemgpu").addEventListener("autocomplete.selected", function (e) { document.getElementById("gpu").setAttribute("value", e.detail.option.value) }), document.getElementById("newsystemos").addEventListener("autocomplete.selected", function (e) { document.getElementById("os").setAttribute("value", e.detail.option.value) }), document.getElementById("newsystemsubmit").addEventListener("click", function () { document.getElementById("newsystemcpu").$.input.validate() && document.getElementById("newsystemgpu").$.input.validate() && document.getElementById("newsystemos").$.input.validate() && document.getElementById("newsystemram").validate() && document.getElementById("newsystemhdd").validate() && (load(), document.getElementById("newsystemform").submit()) }), document.getElementById("newsystemform").addEventListener("iron-form-response", function (e) { e.detail.response.success ? location.href = "/uye/profil#system" : (unload(), document.getElementById("newsystemform").reset(), document.getElementById("cpu").removeAttribute("value"), document.getElementById("gpu").removeAttribute("value"), document.getElementById("os").removeAttribute("value"), document.getElementById("newsystemalert").setAttribute("text", e.detail.response.message), document.getElementById("newsystemalert").setAttribute("opened", "")) }) })
    </script>
</dom-module>
